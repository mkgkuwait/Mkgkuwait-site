<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-ar="ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ·ÙˆØ¹" data-en="Volunteer Registration">ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ·ÙˆØ¹</title>

<style>
body{
  background:#0f1b24;
  color:#fff;
  font-family:Tahoma, Arial;
  margin:0;
  padding-bottom:90px;
}
.page{
  max-width:520px;
  margin:30px auto;
  background:#13232f;
  padding:25px;
  border-radius:14px;
}
header{
  text-align:center;
  margin-bottom:20px;
}
header img{
  max-width:140px;
}
input,select{
  width:100%;
  padding:14px;
  margin:10px 0;
  border-radius:8px;
  border:none;
  font-size:16px;
}
button{
  padding:14px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-size:18px;
}
.submit{
  width:100%;
  background:#c9a24d;
  color:#000;
  margin-top:15px;
}
.consent-box{
  background:#1d3342;
  padding:15px;
  border-radius:8px;
  font-size:15px;
  margin-top:10px;
}
canvas{
  display:block;
  margin-top:10px;
  background:#fff;
  border:1px solid #aaa;
  touch-action:none;
}
.lang-toggle{
  position:fixed;
  top:15px;
  right:15px;
  background:#c9a24d;
  color:#000;
  border:none;
  border-radius:20px;
  padding:8px 14px;
  z-index:9999;
}
.footer-fixed{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#000;
  display:flex;
  justify-content:space-around;
  align-items:center;
  padding:14px 0;
  z-index:9999;
}
.footer-fixed a{
  color:#fff;
  font-size:20px;
  text-decoration:none;
}
</style>
</head>

<body>

<button class="lang-toggle" onclick="toggleLang()">AR / EN</button>

<div class="page">

<header>
  <img src="logo.png" alt="logo">
  <h1 data-ar="ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ·ÙˆØ¹" data-en="Volunteer Registration">ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ·ÙˆØ¹</h1>
</header>

<form id="volunteerForm">

<input name="Full_Name"
  data-ar="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"
  data-en="Full Name"
  placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>

<input name="Civil_ID"
  data-ar="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ"
  data-en="Civil ID"
  placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ" required>

<input name="Volunteer_Phone"
  data-ar="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ØªØ·ÙˆØ¹"
  data-en="Volunteer Phone"
  placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…ØªØ·ÙˆØ¹" required>

<input type="number" id="age" name="Age"
  data-ar="Ø§Ù„Ø¹Ù…Ø±"
  data-en="Age"
  placeholder="Ø§Ù„Ø¹Ù…Ø±" min="10" required>

<select name="Volunteer_Type" required>
  <option value="" data-ar="Ø§Ø®ØªØ± Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ·ÙˆØ¹" data-en="Select Volunteering Field">Ø§Ø®ØªØ± Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ·ÙˆØ¹</option>
  <option data-ar="Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„ØªØ¬Ù…ÙŠÙ„ÙŠØ©" data-en="Landscape Beautification">Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„ØªØ¬Ù…ÙŠÙ„ÙŠØ©</option>
  <option data-ar="ØµÙŠØ§Ù†Ø© Ù…Ø±Ø§ÙÙ‚ ÙˆØ®Ø¯Ù…Ø§Øª Ø¹Ø§Ù…Ø©" data-en="Facilities Maintenance">ØµÙŠØ§Ù†Ø© Ù…Ø±Ø§ÙÙ‚ ÙˆØ®Ø¯Ù…Ø§Øª Ø¹Ø§Ù…Ø©</option>
</select>

<!-- ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± -->
<div id="guardian" style="display:none">

  <h3 data-ar="Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±" data-en="Guardian Information">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h3>

  <input name="Guardian_Name"
    data-ar="Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"
    data-en="Guardian Name"
    placeholder="Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±">

  <input name="Guardian_Civil_ID"
    data-ar="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"
    data-en="Guardian Civil ID"
    placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±">

  <input name="Guardian_Phone"
    data-ar="Ø±Ù‚Ù… Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"
    data-en="Guardian Phone"
    placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±">

  <div class="consent-box">
    <label>
      <input type="checkbox" id="guardianAgree">
      <span
        data-ar="Ø£Ù‚Ø± Ø£Ù†Ø§ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø¨Ù…ÙˆØ§ÙÙ‚ØªÙŠ Ø§Ù„ÙƒØ§Ù…Ù„Ø© ÙˆØ£ØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©."
        data-en="I confirm as guardian my full consent and legal responsibility.">
        Ø£Ù‚Ø± Ø£Ù†Ø§ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø¨Ù…ÙˆØ§ÙÙ‚ØªÙŠ Ø§Ù„ÙƒØ§Ù…Ù„Ø© ÙˆØ£ØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©.
      </span>
    </label>
  </div>

  <p data-ar="ØªÙˆÙ‚ÙŠØ¹ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±:" data-en="Guardian Signature:"><strong>ØªÙˆÙ‚ÙŠØ¹ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±:</strong></p>
  <canvas id="sig" width="380" height="150"></canvas>
  <button type="button" onclick="clearSig()" data-ar="Ù…Ø³Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹" data-en="Clear Signature">Ù…Ø³Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</button>

</div>

<button class="submit" type="submit" data-ar="Ø¥Ø±Ø³Ø§Ù„" data-en="Submit">Ø¥Ø±Ø³Ø§Ù„</button>

</form>
</div>

<!-- ÙÙˆØªØ± Ø«Ø§Ø¨Øª -->
<div class="footer-fixed">
  <a href="https://maps.app.goo.gl/Uh4Pe6vRAKwXzFHb7">ğŸ“</a>
  <a href="mailto:mkgkuwait@outlook.com">âœ‰ï¸</a>
  <a href="tel:25473556">ğŸ“</a>
  <a href="https://x.com/mkgkuwait">X</a>
  <a href="https://instagram.com/mkgkuwait">ğŸ“·</a>
</div>

<script>
/* ===== Ø§Ù„Ù„ØºØ© ===== */
const LANG_KEY="site_lang";
function applyLang(l){
  document.documentElement.dir = l==="ar"?"rtl":"ltr";
  document.querySelectorAll("[data-ar]").forEach(el=>{
    el.textContent = l==="ar"?el.dataset.ar:el.dataset.en;
  });
  document.querySelectorAll("[placeholder]").forEach(el=>{
    if(el.dataset.ar){
      el.placeholder = l==="ar"?el.dataset.ar:el.dataset.en;
    }
  });
}
function toggleLang(){
  const n=(localStorage.getItem(LANG_KEY)||"ar")==="ar"?"en":"ar";
  localStorage.setItem(LANG_KEY,n);
  applyLang(n);
}
applyLang(localStorage.getItem(LANG_KEY)||"ar");

/* ===== Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ù…Ø± ===== */
const age=document.getElementById("age");
const guardian=document.getElementById("guardian");
const agree=document.getElementById("guardianAgree");

age.addEventListener("input",()=>{
  const a=parseInt(age.value,10);
  if(a<10){
    alert("Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ù…Ù† Ù‡Ù… Ø£Ù‚Ù„ Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª");
    age.value="";
    guardian.style.display="none";
    return;
  }
  guardian.style.display = (a<=17)?"block":"none";
  agree.required = (a<=17);
});

/* ===== Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ (Mouse + Touch) ===== */
const canvas=document.getElementById("sig");
const ctx=canvas.getContext("2d");
let drawing=false;

function resetCanvas(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#fff";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle="#000";
  ctx.lineWidth=2;
  ctx.lineCap="round";
}
resetCanvas();

function getPos(e){
  const r=canvas.getBoundingClientRect();
  if(e.touches){
    return {x:e.touches[0].clientX-r.left,y:e.touches[0].clientY-r.top};
  }
  return {x:e.offsetX,y:e.offsetY};
}

function start(e){
  e.preventDefault();
  drawing=true;
  const p=getPos(e);
  ctx.beginPath();
  ctx.moveTo(p.x,p.y);
}
function move(e){
  if(!drawing) return;
  e.preventDefault();
  const p=getPos(e);
  ctx.lineTo(p.x,p.y);
  ctx.stroke();
}
function end(){drawing=false;}

canvas.addEventListener("mousedown",start);
canvas.addEventListener("mousemove",move);
canvas.addEventListener("mouseup",end);
canvas.addEventListener("mouseleave",end);
canvas.addEventListener("touchstart",start,{passive:false});
canvas.addEventListener("touchmove",move,{passive:false});
canvas.addEventListener("touchend",end);

function clearSig(){resetCanvas();}

/* ===== Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ===== */
document.getElementById("volunteerForm").addEventListener("submit",e=>{
  e.preventDefault();
  const data=new FormData(e.target);
  const a=parseInt(age.value,10);

  if(a<=17){
    if(!agree.checked){alert("ÙŠØ¬Ø¨ Ù…ÙˆØ§ÙÙ‚Ø© ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±");return;}
    data.append("Guardian_Signature_Base64",canvas.toDataURL("image/png"));
  }

  fetch("https://script.google.com/macros/s/AKfycbygn8i590rV6sLcHtjZV2HrcUVSE-VILFyrqqj-bvpIotdPMxK9TpNbvSWeGuMtO_YYMA/exec",
    {method:"POST",body:data})
  .then(()=>location.href="thankyou.html")
  .catch(()=>alert("ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"));
});
</script>

</body>
</html>
